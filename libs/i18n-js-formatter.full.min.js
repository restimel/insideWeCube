/* https://github.com/restimel/i18n-js-formatter */
!function(){"use strict";function i18n(sentence){var text=_translation(sentence),args=Array.prototype.slice.call(arguments,1);return text=_parse.apply(this,[text].concat(args))}function _reset(){statusVariables={locales:{},localeKeys:[],defaultKeyLocale:void 0,currentLocale:null,useDfltLocale:!0,storage:{kind:"none",name:""},data:{},loadingMethod:{},syncLoading:!1,lazyLoading:!0,onLocaleReady:null,formatter:[],status:{callLocaleLoaded:!1},log:{info:null,warn:null,error:null}}}function _resetDataKey(key){statusVariables.data[key]=null}function _createLocale(key,name){var dflt,locale;return key=key.toLowerCase(),dflt=statusVariables.locales[key]||{},locale={key:key,name:_default(name,dflt.name),secondary:!1,formatRules:_extend({},defaultRules)}}function _cleanData(){_each(statusVariables.data,function(value,key){-1===statusVariables.localeKeys.indexOf(key)&&delete statusVariables.data[key]}),statusVariables.localeKeys.forEach(function(key){statusVariables.data[key]||_resetDataKey(key)})}function _configureLocaleSet(options){var nextLocales={},needLoading=!1;return statusVariables.localeKeys=[],options.localeSet.forEach(function(localeObj){var key,name,secondary,formatRules,dataDictionary,locale,data;if("object"==typeof localeObj){if(key=localeObj.localeKey||localeObj.key||localeObj.locale,name=localeObj.localeName||localeObj.name,secondary=localeObj.secondary,formatRules=localeObj.formatRules,dataDictionary=localeObj.data,"string"!=typeof key)return void _warning(4050,["localeSet"]);!name&&options.localeName&&(name=options.localeName[key]),locale=_createLocale(key,name),key=locale.key,"string"==typeof secondary&&(locale.secondary=secondary),"object"==typeof formatRules&&_setFormatRules(formatRules,locale),dataDictionary&&(data={},data[key]=dataDictionary,_loadData(data),needLoading=!0),nextLocales[key]||statusVariables.localeKeys.push(key),nextLocales[key]=locale}}),_cleanData(),statusVariables.locales=nextLocales,needLoading}function _configureLocales(options){var nextLocales={};statusVariables.localeKeys=[],options.locales.forEach(function(key){var locale;"string"==typeof key&&(locale=_createLocale(key,options.localeName&&options.localeName[key]),key=locale.key,nextLocales[key]||statusVariables.localeKeys.push(key),nextLocales[key]=locale)}),_cleanData(),statusVariables.locales=nextLocales}function _configurelocaleNames(options){_each(options.localeName,function(value,key){key=_formatLocaleKey(key),statusVariables.locales[key]&&(statusVariables.locales[key].name=value)})}function _setFormatRules(rules,lng){var locale;"string"==typeof lng?(lng=_formatLocaleKey(lng),locale=statusVariables.locales[lng]):locale=lng,locale&&(_extend(locale.formatRules,rules),rules.number&&rules.number.SIsuffix&&locale.formatRules.number.SIsuffix.sort(function(s1,s2){return s2.multiple-s1.multiple}))}function _configureFormatRules(rules){_each(rules,_setFormatRules)}function _configureSecondaries(secondaries){var preparationSecondaries={},errors=!1;return _each(secondaries,function(origValue,key){var value=origValue;if(key=_formatLocaleKey(key),statusVariables.locales[key]){if("string"!=typeof value){if(value!==!1&&null!==value)return void _warning(4031,[key,typeof value]);value=!1}else if(value=_formatLocaleKey(value),!value)return void _warning(4030,[key,origValue]);preparationSecondaries[key]=value}}),_each(preparationSecondaries,function(value,key){for(var list=[key];value!==!1&&-1===list.indexOf(value);)list.push(value),key=value,value=preparationSecondaries[key],"undefined"==typeof value&&(value=statusVariables.locales[key].secondary);value&&(errors=[7030,[list.join(", ")]])}),errors?void _error.apply(this,errors):void _each(preparationSecondaries,function(value,key){statusVariables.locales[key].secondary=value})}function _configureLog(optLog,kind){statusVariables.log[kind]=optLog}function _configureStorage(options){var type="none";options instanceof Array?options.some(function(opt){var o=opt.replace(/:.*$/,"");switch(o){case"cookie":if(_mayUse.cookie())return type=opt,!0;break;case"localStorage":if(_mayUse.localStorage())return type=opt,!0}}):type=options,type=type.split(":"),statusVariables.storage.kind=type[0],statusVariables.storage.name=type[1]}function _setStorage(value,reset){switch(statusVariables.storage.kind){case"cookie":reset?document.cookie=statusVariables.storage.name+"=":document.cookie=statusVariables.storage.name+"="+value;break;case"localStorage":reset?self.localStorage.removeItem(statusVariables.storage.name):self.localStorage.setItem(statusVariables.storage.name,value)}}function _getStorage(){var value,srch;switch(statusVariables.storage.kind){case"cookie":srch=statusVariables.storage.name+"=",value=document.cookie.split(";").filter(function(str){return 0===str.indexOf(srch)})[0],value&&(value=value.substr(srch.length+1));break;case"localStorage":value=self.localStorage.getItem(statusVariables.storage.name)}return value}function _getLocale(locale,options){var result,lastResult,nb;return options||(options={key:!0}),locale?(result={},nb=0,_each(options,function(value,attribute){if(value){switch(attribute){case"data":lastResult=statusVariables.data[locale.key]&&statusVariables.data[locale.key][value];break;case"localeKey":case"locale":lastResult=locale.key;break;case"localeName":lastResult=locale.name;break;default:lastResult=locale[attribute]}result[attribute]=lastResult,nb++}}),1===nb?result=lastResult:0===nb&&(result=locale.key),result):void 0}function _getDefaultKey(){var key=_getStorage();return key||"string"!=typeof statusVariables.defaultKeyLocale||(key=_formatLocaleKey(statusVariables.defaultKeyLocale)),key||(self.navigator&&self.navigator.languages instanceof Array&&self.navigator.languages.some(function(lng){return key=_formatLocaleKey(lng)}),key||(key=statusVariables.localeKeys[0])),key}function _getCatalog(){var catalog=[];return statusVariables.localeKeys.forEach(function(key){var dico=statusVariables.data[key];dico&&_each(dico,function(v,sentence){-1===catalog.indexOf(sentence)&&catalog.push(sentence)})}),catalog}function _formatLocaleKey(key){for(key=_default(key,""),key=key.toLowerCase();!statusVariables.locales[key]&&key;)key=key.replace(/(?:^|-)[^-]*$/,"");return key}function _addFormatter(formatter,name,weight){return"function"!=typeof formatter?void _error(7200,[name]):("undefined"==typeof weight&&(weight=statusVariables.formatter.length?statusVariables.formatter[statusVariables.formatter.length-1].w-10:100),statusVariables.formatter.push({f:formatter,w:weight,name:name}),void statusVariables.formatter.sort(function(a,b){return b.w-a.w}))}function _parse(text){var txt,values;return values=Array.prototype.slice.call(arguments,1),txt=statusVariables.formatter.reduce(function(text,formatter){try{text=formatter.f(text,values,statusVariables)}catch(e){_warning(4200,[formatter.name,e.message])}return text},text)}function _loadDictionary(dictionary){switch(typeof dictionary){case"object":_addDictionary(dictionary);break;case"function":_addDictionary(dictionary());break;case"string":_ajax(dictionary,_addDictionary);break;default:_error(7010,[typeof dictionary,dictionary])}}function _loadData(dictionary,key){var addData=key?_addDataWithKey:_addData;switch(typeof dictionary){case"object":addData(dictionary,key);break;case"function":addData(dictionary(key),key);break;case"string":_ajax(dictionary,addData,key);break;default:key?_error(7013,[key,typeof dictionary,dictionary]):_error(7012,[typeof dictionary,dictionary])}}function _loadCurrentLocale(){var key=statusVariables.currentLocale.key,method=statusVariables.loadingMethod[key],dictionary=statusVariables.data[key];if(statusVariables.status.callLocaleLoaded=!0,dictionary&&"object"==typeof dictionary)_localeReady();else switch(typeof method){case"function":_addDataWithKey(method(key),key);break;case"string":_ajax(method,_addDataWithKey,key);break;case"undefined":_localeReady();break;default:_error(7013,[key,typeof method,method]),_localeReady()}}function _addDictionary(dictionary){_each(dictionary,_addItem),_localeReady()}function _addData(dictionary){var loadData=statusVariables.lazyLoading?_saveData:_loadData;return"object"!=typeof dictionary?void _error(7012,[typeof dictionary,dictionary]):(_each(dictionary,loadData),void(statusVariables.status.callLocaleLoaded===!0&&_localeReady()))}function _addDataWithKey(dico,key){dico&&(_addDataByKey(dico,key),statusVariables.status.callLocaleLoaded===!0&&_localeReady())}function _saveData(dico,key){dico&&("object"==typeof dico?_addDataWithKey(dico,key):statusVariables.loadingMethod[key]=dico)}function _addDataByKey(dico,key){return"object"==typeof dico[key]&&(dico=dico[key]),"object"!=typeof dico?void _error(7014,[key,typeof dico,dico]):void _each(dico,function(value,sentenceKey){var obj={};obj[key]=value,_addItem(obj,sentenceKey)})}function _addItem(values,sentenceKey){return"object"!=typeof values?void _error(7011,[typeof values,values]):void _each(values,function(value,key){var dico=statusVariables.data[key];null===dico&&(dico=statusVariables.data[key]={}),dico&&(dico[sentenceKey]=value)})}function _ajax(url,success,key){function _manageResponse(response){var json;try{json=JSON.parse(response)}catch(e){_error(7020,[url,response])}return json}var rslt,xhr=new XMLHttpRequest;statusVariables.syncLoading?(xhr.open("GET",url,!1),xhr.send(null),200===xhr.status||0===xhr.status?(rslt=_manageResponse(xhr.responseText),rslt&&success(rslt,key)):_error(8e3+xhr.status,[url])):(xhr.onreadystatechange=function(){xhr.readyState===xhr.DONE&&(200===xhr.status||0===xhr.status?(rslt=_manageResponse(xhr.responseText),rslt&&success(rslt,key)):_error(8e3+xhr.status,[url]))},xhr.open("GET",url,!0),xhr.send(null))}function _localeReady(){statusVariables.status.callLocaleLoaded===!0&&"function"==typeof statusVariables.onLocaleReady&&_hasDataKey(statusVariables.currentLocale.key)&&(statusVariables.status.callLocaleLoaded=!1,statusVariables.onLocaleReady(statusVariables.currentLocale.key))}function _hasDataKey(key){var hasData="object"==typeof statusVariables.data[key]&&null!==statusVariables.data[key],secondary=statusVariables.locales[key].secondary;return hasData&&(!secondary||secondary&&_hasDataKey(secondary))}function _translation(sentenceKey,key,origKey){var sentence;switch(key=key||statusVariables.currentLocale.key,origKey=origKey||key,typeof sentenceKey){case"string":sentence=_translationString(sentenceKey,key,origKey);break;case"object":sentence=_translationObject(sentenceKey,key,origKey);break;default:sentence="",_error(7100,[typeof sentenceKey,sentenceKey])}return sentence}function _translationString(sentenceKey,key,origKey){var ldata,sentence;return ldata=statusVariables.data[key],sentence=ldata&&ldata[sentenceKey],sentence=_translationFallback(sentenceKey,key,origKey,sentence,_translationIssueString)}function _translationIssueString(sentenceKey,origKey){return _warning(4100,[sentenceKey,origKey]),sentenceKey}function _translationObject(sentenceObject,key,origKey){var sentence;return sentence=sentenceObject[key],sentence=_translationFallback(sentenceObject,key,origKey,sentence,_translationIssueObject)}function _translationIssueObject(sentenceKey,origKey){var json;try{json=JSON.stringify(sentenceKey)}catch(e){json=sentenceKey.toString()}return _warning(4101,[json,origKey,sentenceKey]),""}function _translationFallback(sentenceKey,key,origKey,sentence,notTranslated){var secondary;return"string"!=typeof sentence&&(secondary=statusVariables.locales[key].secondary,sentence=secondary?_translation(sentenceKey,secondary,origKey):notTranslated(sentenceKey,origKey)),sentence}function _warning(code,details){var message=_getMessage(code,details);"function"==typeof statusVariables.log.warn?statusVariables.log.warn(code,message,details):console.warn(message)}function _error(code,details){var message=_getMessage(code,details);"function"==typeof statusVariables.log.error?statusVariables.log.error(code,message,details):console.error(message)}function _getMessage(code,details){var idx,message=_codeMessage[code];return message?(idx=0,message=message.replace(/%s/g,function(){return details[idx++]})):message="unknown code ("+code+") with details ("+details+")",message}function _export(name){"undefined"!=typeof exports?exports[name]=i18n:(self[name]=i18n,"function"==typeof define&&define.amd&&define(function(){var obj={};return obj[name]=i18n,obj}))}function _default(value,dfltValue){return"undefined"==typeof value?dfltValue:value}function _extend(origObj,extendObj){return _each(extendObj,function(value,key){"object"!=typeof value?origObj[key]=value:(value instanceof Array?origObj[key]=[]:"object"!=typeof origObj[key]&&(origObj[key]={}),_extend(origObj[key],value))}),origObj}function _each(object,iteratee,context){var x,f;f="object"==typeof context?iteratee.bind(context):iteratee;for(x in object)object.hasOwnProperty(x)&&f(object[x],x,object)}var statusVariables,version="0.0.2",_codeMessage={4030:'The secondary fallback of "%s" cannot be set to "%s" because it is out of locales scope. This setting has been ignored.',4031:'The secondary fallback of "%s" cannot be of type "%s". It must be a string or false. This setting has been ignored.',4050:"The configuration option %s is badly set because there is no valid key defined. This setting has been ignored.",4100:'The sentence "%s" is not translated for language "%s".',4101:'It is not possible to translate object (%s) to language "%s".',4200:'Formatter "%s" has thrown an issue: %s',7010:"dictionary is in a wrong format (%s): %s",7011:"item is in a wrong format (%s while object is expected): %s",7012:"data is in a wrong format (%s): %s",7013:'data with key "%s" is in a wrong format (%s): %s',7014:'data for key "%s" can not be loaded due to wrong format (%s while object is expected): %s',7020:'data recieved from "%s" is not in a valid JSON ("%s")',7030:"The secondaries fallback create a circular loop (%s).",7100:"Translation is not possible due to an unsupported type (%s): %s",7200:"Formatter %s can not be added because it is not a function.",8401:"Unauthorized request: %s",8403:"Request forbidden: %s",8404:"Page not found: %s",8405:"Method is not allowed: %s",8407:"Proxy authentication required: %s",8408:"Request timeout: %s",8418:"Sorry, I cannot brew your coffee: %s",8500:"Internal server error: %s",8501:"Not implemented (server error): %s",8502:"Bad Gateway: %s",8503:"Service on server is unavailable: %s",8504:"Gateway timeout: %s",8505:"HTTP version is not supported by server: %s"},defaultRules={number:{thousandSeparator:",",decimalSeparator:".",exponentialSeparator:"e",SIsuffix:[{suffix:"P",multiple:1e15},{suffix:"T",multiple:1e12},{suffix:"G",multiple:1e9},{suffix:"M",multiple:1e6},{suffix:"k",multiple:1e3},{suffix:"",multiple:1},{suffix:"m",multiple:.001},{suffix:"µ",multiple:1e-6},{suffix:"n",multiple:1e-9},{suffix:"p",multiple:1e-12},{suffix:"f",multiple:1e-15}]},duration:{y:"y",month:"M",d:"d",h:"h",min:"min",s:"s",ms:"ms","µs":"µs"}};_reset(),i18n.configuration=function(options){options||(options={});var needLoading="undefined"!=typeof options.dictionary||"undefined"!=typeof options.data;"object"==typeof options.log&&_each(options.log,_configureLog),options.localeSet&&options.localeSet instanceof Array?needLoading=_configureLocaleSet(options)||needLoading:options.locales instanceof Array?_configureLocales(options):"object"==typeof options.localeName&&_configurelocaleNames(options),"object"==typeof options.secondary&&_configureSecondaries(options.secondary),"object"==typeof options.formatRules&&_configureFormatRules(options.formatRules),"string"==typeof options.alias&&_export(options.alias),"undefined"!=typeof options.onLocaleReady&&(statusVariables.onLocaleReady=options.onLocaleReady),"boolean"==typeof options.syncLoading&&(statusVariables.syncLoading=options.syncLoading),"boolean"==typeof options.lazyLoading&&(statusVariables.lazyLoading=options.lazyLoading),needLoading&&(statusVariables.status.callLocaleLoaded=!0),"undefined"!=typeof options.dictionary&&_loadDictionary(options.dictionary),"undefined"!=typeof options.data&&_loadData(options.data),"undefined"!=typeof options.storage&&(_configureStorage(options.storage),statusVariables.useDfltLocale||_setStorage(statusVariables.currentLocale.key)),"undefined"!=typeof options.defaultLocale&&(statusVariables.defaultKeyLocale=options.defaultLocale),statusVariables.useDfltLocale&&statusVariables.localeKeys.length&&(statusVariables.currentLocale=statusVariables.locales[_getDefaultKey()]),needLoading&&statusVariables.lazyLoading&&_loadCurrentLocale()},i18n.setLocale=function(key){var useDflt="undefined"==typeof key,saveChanged=!0;return key=useDflt?_getDefaultKey():_formatLocaleKey(key),key===statusVariables.currentLocale.key?key=!1:statusVariables.locales[key]?(statusVariables.currentLocale=statusVariables.locales[key],_loadCurrentLocale()):(key=!1,saveChanged=!1),saveChanged&&(statusVariables.useDfltLocale=useDflt,_setStorage(i18n.getLocale(),statusVariables.useDfltLocale)),key},i18n.getLocale=function(options){return _getLocale(statusVariables.currentLocale,options)},i18n.getLocales=function(options){return statusVariables.localeKeys.map(function(key){return _getLocale(statusVariables.locales[key],options)})},i18n.getData=function(options){var rslt,dico,opt="object"==typeof options?options:{},key=("string"==typeof options?options:opt.key||opt.locale)||"",format=opt.format||"data";return key=_formatLocaleKey(key),dico=statusVariables.data[key],"dictionary"===format?(rslt={},_getCatalog().forEach(function(sentence){rslt[sentence]={},dico&&dico[sentence]?rslt[sentence][key]=dico[sentence]:statusVariables.localeKeys.forEach(function(key){statusVariables.data[key]&&statusVariables.data[key][sentence]&&(rslt[sentence][key]=statusVariables.data[key][sentence])})})):rslt=key&&"undefined"!=typeof dico?dico:statusVariables.data,rslt},i18n.addItem=function(sentenceKey,values){_addItem(values,sentenceKey)},i18n.loadFormatter=function(options){"object"!=typeof options&&(options={formatter:options});var formatter=options.formatter,name=options.name||formatter.name||"",weight=options.weight;_addFormatter(formatter,name,weight)},i18n.parse=_parse,i18n.clearData=function(key){"undefined"==typeof key?(statusVariables.data={},statusVariables.localeKeys.forEach(_resetDataKey)):(key=_formatLocaleKey(key),statusVariables.data[key]&&_resetDataKey(key))},i18n.getRules=function(key){var useDflt="undefined"==typeof key;return key=useDflt?statusVariables.currentLocale.key:_formatLocaleKey(key),statusVariables.locales[key]&&statusVariables.locales[key].formatRules||{}},i18n.version=function(){return version},i18n._reset=_reset;var _mayUse={cookie:function(){return!(!self.document||!document.cookie)},localStorage:function(){return!!self.localStorage}};"object"==typeof _i18n_config?(i18n.configuration(_i18n_config),_i18n_config.doNotAliasi18n||_export("i18n")):_export("i18n")}(),function(){"use strict";function s_formatter(text,values,statusVariable){function getRules(){return statusVariable.currentLocale.formatRules}function buildX0(nb){var result=[];if(nb=+nb,!nb)return"";for(;result.length<nb;)result.push("0");return result.join("")}function stringReplacement(value,variation){return value="undefined"==typeof value?"undefined":value.toString(),variation&&(-1!==variation.indexOf("case")?value=value.toLowerCase():-1!==variation.indexOf("CASE")?value=value.toUpperCase():-1!==variation.indexOf("Case")?value=value.charAt(0).toUpperCase()+value.slice(1).toLowerCase():-1!==variation.indexOf("CasE")&&(value=value.charAt(0).toUpperCase()+value.slice(1))),value}function getNumber(value,variation){var splitValue,nb,status;return nb=Number(value),splitValue=nb.toString().split("."),status={number:nb,integer:splitValue[0],decimal:splitValue[1]},variation&&variation.forEach(function(code){var nb=parseInt(code.slice(1),10);if(!isNaN(nb))switch(code.charAt(0)){case".":status.decimal&&(status.decimal.length>nb||"0"===status.decimal.charAt(status.decimal.length-1))&&(status.decimal=(Math.round(("0."+status.decimal)*Math.pow(10,nb))/Math.pow(10,nb)).toString().slice(2));break;case"p":status.integer.length<nb&&(status.integer=buildX0(nb-status.integer.length)+status.integer);break;case"d":status.decimal||(status.decimal=""),status.decimal.length<nb&&(status.decimal+=buildX0(nb-status.decimal.length))}}),status}function rawNumber(origValue,variation){var status=getNumber(origValue,variation),result=[status.integer];return status.decimal&&result.push(".",status.decimal),result.join("")}function prettyNumber(origValue,variation,isInteger){var value,status=getNumber(origValue,variation),integer=status.integer,rules=getRules().number,thousandSeparator=rules.thousandSeparator,decimalSeparator=rules.decimalSeparator;return value=integer.replace(/(\d)(?=(?:\d{3})+$)/g,"$1"+thousandSeparator),!isInteger&&status.decimal&&(value=[value,decimalSeparator,status.decimal].join("")),value}function shortNumber(origValue,variation){var value,computeValue,i,sign,suffix;if(origValue=Number(origValue),sign=0>origValue,computeValue=Math.abs(origValue),!isFinite(computeValue))return computeValue;variation?variation.every(function(v){return 0!==v.indexOf(".")})&&variation.unshift(".3"):variation=[".3"],0===origValue&&(computeValue=1),suffix=getRules().number.SIsuffix,i=0;do value=computeValue/suffix[i].multiple;while(++i<suffix.length&&1>value);return i--,0===origValue&&(value=0),sign&&(value=-value),prettyNumber(value,variation)+suffix[i].suffix}function expNumber(origValue,variation){var value,splitValue,status,expSep,result;return value=Number(origValue).toExponential(),splitValue=value.split("e"),status=getNumber(splitValue[0],variation),isFinite(status.number)?(expSep=getRules().number.exponentialSeparator,result=[status.integer],status.decimal&&result.push(".",status.decimal),result.push(expSep,splitValue[1]),result.join("")):status.number}function getTimeUnitIndex(unit){var index={y:0,month:1,M:1,d:2,h:3,min:4,m:4,s:5,ms:6,i:6,"µs":7,"µ":7}[unit];return"undefined"==typeof index?-1:index}function getTimestamp(value,variation){var unit,code,index,multiplier;return variation instanceof Array&&(code=variation.filter(function(v){return 0===v.indexOf("u:")})[0]),unit=code?code.substr(2):"ms",index=getTimeUnitIndex(unit),multiplier=timeUnitScale[index],multiplier?value*multiplier:value}function duration(origValue,variation){function activateUnit(str){var codes=str.match(/\$./g)||[];durationScale.forEach(function(code){code[2]=-1!==codes.indexOf(code[0])})}var microTs,timeUnit,durationScale,durationValue,defaultFormat,format,code,maxUnit=-1,minUnit=1/0,limit=0;return timeUnit=getRules().duration,durationScale=[["$y","y",!0],["$M","month",!0],["$d","d",!0],["$h","h",!0],["$m","min",!0],["$s","s",!0],["$i","ms",!0],["$µ","µs",!0]],durationValue=[],defaultFormat=[],microTs=1e3*getTimestamp(origValue,variation),variation&&(code=variation.filter(function(v){return 0===v.indexOf('f:"')})[0],code&&(format=code.slice(3,-1),activateUnit(format)),code=variation.filter(function(v){return 0===v.indexOf('f:$"')})[0],code&&(format=code.slice(4,-1).replace(/([yMdhmsiµ$])/g,"$$$1"),activateUnit(format)),code=variation.filter(function(v){return 0===v.indexOf("min:")})[0],code&&(minUnit=getTimeUnitIndex(code.substr(4))),code=variation.filter(function(v){return 0===v.indexOf("max:")})[0],code&&(maxUnit=getTimeUnitIndex(code.substr(4))),code=variation.filter(function(v){return 0===v.indexOf("n:")})[0],code&&(limit=parseInt(code.substr(2),10),maxUnit>=0&&maxUnit+limit>minUnit&&(minUnit=maxUnit+limit-1,limit=0))),timeUnitScale.forEach(function(scale,index){scale*=1e3;var chunk=Math.floor(microTs/scale),code=durationScale[index];return!code[2]||maxUnit>index||index>minUnit?void durationValue.push(0):(chunk&&limit&&(minUnit=index+limit-1,limit=0),microTs-=chunk*scale,durationValue.push(chunk),void(chunk&&defaultFormat.push(code[0]+timeUnit[code[1]])))}),format=format?format:defaultFormat.join(" "),format=format.replace(/\$([yMdhmsiµ$])/g,function(pattern,code){var index="yMdhmsiµ".indexOf(code);return-1===index?"$"===code?code:pattern:prettyNumber(durationValue[index],[],!0)})}function replacement(pattern,arg,variation,kind){var value;switch(count++,arg?(arg=arg.slice(1,-1),/\d+/.test(arg)?value=values[parseInt(arg,10)-1]:(arg=arg.split("."),value=arg.reduce(function(obj,property){return"undefined"!=typeof obj&&(obj=obj[property]),obj},values[0]))):value=values[count],variation&&(variation=variation.slice(1,-1).split(",").map(function(v){return v.trim()})),kind){case"s":return stringReplacement(value,variation);case"f":return rawNumber(value,variation);case"d":return prettyNumber(value,variation);case"D":return shortNumber(value,variation);case"i":return prettyNumber(value,variation,!0);case"e":return expNumber(value,variation);case"t":return duration(value,variation);case"%":return"%"}}var count=-1;return text=text.replace(/%(\([^\)]+\))?(\{[^\}]*\})?([%dDefist])/g,replacement)}var i18n="i18n",has_i18n_config="object"==typeof _i18n_config,timeUnitScale=[31536e6,2592e6,864e5,36e5,6e4,1e3,1,.001];!has_i18n_config&&!self[i18n]||has_i18n_config&&_i18n_config.doNotLoadFormatter?self.s_formatter=s_formatter:(has_i18n_config&&_i18n_config.alias&&(i18n=_i18n_config.alias),self[i18n].loadFormatter(s_formatter,100))}();